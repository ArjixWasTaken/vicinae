syntax = "proto3";
import "google/protobuf/struct.proto";
import "common.proto";

package proto.ext.ui;

enum ToastStyle {
  Success = 0;
  Info = 1;
  Warning = 2;
  Error = 3;
  Dynamic = 4;
};

message ShowToastRequest {
  string id = 1;
  string title = 2;
  ToastStyle style = 3;
};

message HideToastRequest {
  string id = 1;
};

message UpdateToastRequest {
  string id = 1;
  string title = 2;
};

message PushViewRequest {}
message PopViewRequest {}
message CloseMainWindowRequest {};
message ClearSearchBarRequest {};

message SetSearchTextRequest {
  string text = 1;
};

message ShowHudRequest {
  string text = 1;
};

message RenderRequest {
   //repeated RenderNode views = 1;
   // we will migrate to actual protobuf
   string json = 1;
};

message Request {
  oneof payload {
    RenderRequest render = 1;
    ShowToastRequest show_toast = 2;
    HideToastRequest hide_toast = 3;
    UpdateToastRequest update_toast = 4;
    PushViewRequest push_view = 5;
    PopViewRequest pop_view = 6;
    ClearSearchBarRequest clear_search = 7;
    CloseMainWindowRequest close_main_window = 8;
    ShowHudRequest show_hud = 9;
    SetSearchTextRequest set_search_text = 10;
  };
};

message Response {
  common.AckResponse render = 1;
  common.AckResponse show_toast = 2;
  common.AckResponse hide_toast = 3;
  common.AckResponse update_toast = 4;
  common.AckResponse push_view = 5;
  common.AckResponse pop_view = 6;
  common.AckResponse clear_search = 7;
  common.AckResponse close_main_window = 8;
  common.AckResponse show_hud = 9;
  common.AckResponse set_search_text = 10; 
};

message RenderNode {
  string type = 1;
  bool has_dirty_child = 2;
  bool has_dirty_props = 3;
  map<string, google.protobuf.Value> props = 4;
  repeated RenderNode children = 5;
};
